import{g as Y,a as K,b as ct,s as ft,r as N,c as dt,d as pt}from"./switcher-bd5a1d2d.js";import{g as vt,l as gt}from"./lodash-99ebc3cd.js";function ht(h){return h.length>20?h.substring(0,20)+"...":h}function mt(h,P,s,v,e,i){if(!h)return;let n="";return v.length?n=ht(v.slice(0,2).join(", ")):n="There are no genres",`<li class="gallery-movies-item" data-id="${s}">
        <img class="gallery-movies-img" src="https://image.tmdb.org/t/p/original/${h}" alt="${P}" loading="lazy">
        <div class="gallery-movies-overlay js-modal-info" data-id="${s}"></div>
            <div class="gallery-movies-description">
                <h3 class="gallery-movies-title">${P}</h3>
                <div class="gallery-movies-wrap">
                <p class="gallery-movies-details">${n} | ${e}</p>
                <img src="${i}" alt="raiting" class="star-rating-card"/>
                </div>
            </div>
        </li>`}var W={exports:{}};/*!
 * TOAST UI Pagination
 * @version 3.4.1
 * @author NHN FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */(function(h,P){(function(v,e){h.exports=e()})(window,function(){return function(s){var v={};function e(i){if(v[i])return v[i].exports;var n=v[i]={i,l:!1,exports:{}};return s[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=s,e.c=v,e.d=function(i,n,f){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:f})},e.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(n&1&&(i=e(i)),n&8||n&4&&typeof i=="object"&&i&&i.__esModule)return i;var f=Object.create(null);if(e.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:i}),n&2&&typeof i!="string")for(var d in i)e.d(f,d,function(o){return i[o]}.bind(null,d));return f},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="dist",e(e.s=10)}([function(s,v,e){function i(n,f){var d=Object.prototype.hasOwnProperty,o,u,p,C;for(p=1,C=arguments.length;p<C;p+=1){o=arguments[p];for(u in o)d.call(o,u)&&(n[u]=o[u])}return n}s.exports=i},function(s,v,e){function i(n){return n===void 0}s.exports=i},function(s,v,e){function i(n){return n instanceof Array}s.exports=i},function(s,v,e){var i=e(2),n=e(17),f=e(6);function d(o,u,p){i(o)?n(o,u,p):f(o,u,p)}s.exports=d},function(s,v,e){function i(n){return typeof n=="string"||n instanceof String}s.exports=i},function(s,v,e){function i(n){return n instanceof Function}s.exports=i},function(s,v,e){function i(n,f,d){var o;d=d||null;for(o in n)if(n.hasOwnProperty(o)&&f.call(d,n[o],o,n)===!1)break}s.exports=i},function(s,v,e){var i=e(18),n=e(0);function f(d,o){var u;return o||(o=d,d=null),u=o.init||function(){},d&&i(u,d),o.hasOwnProperty("static")&&(n(u,o.static),delete o.static),n(u.prototype,o),u}s.exports=f},function(s,v,e){var i=e(2);function n(f,d,o){var u,p;if(o=o||0,!i(d))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(d,f,o);for(p=d.length,u=o;o>=0&&u<p;u+=1)if(d[u]===f)return u;return-1}s.exports=n},function(s,v,e){var i=e(29),n=e(30),f=e(5),d={capitalizeFirstLetter:function(o){return o.substring(0,1).toUpperCase()+o.substring(1,o.length)},isContained:function(o,u){return u?o===u?!0:u.contains(o):!1},createElementByTemplate:function(o,u){var p=document.createElement("div"),C=f(o)?o(u):i(o,u);return p.innerHTML=C,p.firstChild},bind:function(o,u){var p=Array.prototype.slice,C;return o.bind?o.bind.apply(o,p.call(arguments,1)):(C=p.call(arguments,2),function(){return o.apply(u,C.length?C.concat(p.call(arguments)):arguments)})},sendHostName:function(){n("pagination","UA-129987462-1")}};s.exports=d},function(s,v,e){e(11),s.exports=e(12)},function(s,v,e){},function(s,v,e){var i=e(13),n=e(7),f=e(0),d=e(1),o=e(20),u=e(9),p={totalItems:10,itemsPerPage:10,visiblePages:10,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",usageStatistics:!0},C=n({init:function(a,t){this._options=f({},p,t),this._currentPage=0,this._view=new o(a,this._options,u.bind(this._onClickHandler,this)),this._paginate(),this._options.usageStatistics&&u.sendHostName()},_setCurrentPage:function(a){this._currentPage=a||this._options.page},_getLastPage:function(){var a=Math.ceil(this._options.totalItems/this._options.itemsPerPage);return a||1},_getPageIndex:function(a){var t,r;return this._options.centerAlign?(t=Math.floor(this._options.visiblePages/2),r=a-t,r=Math.max(r,1),r=Math.min(r,this._getLastPage()-this._options.visiblePages+1),r):Math.ceil(a/this._options.visiblePages)},_getRelativePage:function(a){var t=a==="prev",r=this.getCurrentPage();return t?r-1:r+1},_getMorePageIndex:function(a){var t=this._getPageIndex(this.getCurrentPage()),r=this._options.visiblePages,l=a==="prev",g;return this._options.centerAlign?g=l?t-1:t+r:g=l?(t-1)*r:t*r+1,g},_convertToValidPage:function(a){var t=this._getLastPage();return a=Math.max(a,1),a=Math.min(a,t),a},_paginate:function(a){var t=this._makeViewData(a||this._options.page);this._setCurrentPage(a),this._view.update(t)},_makeViewData:function(a){var t={},r=this._getLastPage(),l=this._getPageIndex(a),g=this._getPageIndex(r),_=this._getEdge(a);return t.leftPageNumber=_.left,t.rightPageNumber=_.right,t.prevMore=l>1,t.nextMore=l<g,t.page=a,t.currentPageIndex=a,t.lastPage=r,t.lastPageListIndex=r,t},_getEdge:function(a){var t,r,l,g=this._getLastPage(),_=this._options.visiblePages,L=this._getPageIndex(a);return this._options.centerAlign?(l=Math.floor(_/2),t=Math.max(a-l,1),r=t+_-1,r>g&&(t=Math.max(g-_+1,1),r=g)):(t=(L-1)*_+1,r=L*_,r=Math.min(r,g)),{left:t,right:r}},_onClickHandler:function(a,t){switch(a){case"first":t=1;break;case"prev":t=this._getRelativePage("prev");break;case"next":t=this._getRelativePage("next");break;case"prevMore":t=this._getMorePageIndex("prev");break;case"nextMore":t=this._getMorePageIndex("next");break;case"last":t=this._getLastPage();break;default:if(!t)return}this.movePageTo(t)},reset:function(a){d(a)&&(a=this._options.totalItems),this._options.totalItems=a,this._paginate(1)},movePageTo:function(a){a=this._convertToValidPage(a),this.invoke("beforeMove",{page:a})&&(this._paginate(a),this.fire("afterMove",{page:a}))},setTotalItems:function(a){this._options.totalItems=a},setItemsPerPage:function(a){this._options.itemsPerPage=a},getCurrentPage:function(){return this._currentPage||this._options.page}});i.mixin(C),s.exports=C},function(s,v,e){var i=e(0),n=e(14),f=e(4),d=e(16),o=e(2),u=e(5),p=e(3),C=/\s+/g;function a(){this.events=null,this.contexts=null}a.mixin=function(t){i(t.prototype,a.prototype)},a.prototype._getHandlerItem=function(t,r){var l={handler:t};return r&&(l.context=r),l},a.prototype._safeEvent=function(t){var r=this.events,l;return r||(r=this.events={}),t&&(l=r[t],l||(l=[],r[t]=l),r=l),r},a.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},a.prototype._indexOfContext=function(t){for(var r=this._safeContext(),l=0;r[l];){if(t===r[l][0])return l;l+=1}return-1},a.prototype._memorizeContext=function(t){var r,l;n(t)&&(r=this._safeContext(),l=this._indexOfContext(t),l>-1?r[l][1]+=1:r.push([t,1]))},a.prototype._forgetContext=function(t){var r,l;n(t)&&(r=this._safeContext(),l=this._indexOfContext(t),l>-1&&(r[l][1]-=1,r[l][1]<=0&&r.splice(l,1)))},a.prototype._bindEvent=function(t,r,l){var g=this._safeEvent(t);this._memorizeContext(l),g.push(this._getHandlerItem(r,l))},a.prototype.on=function(t,r,l){var g=this;f(t)?(t=t.split(C),p(t,function(_){g._bindEvent(_,r,l)})):d(t)&&(l=r,p(t,function(_,L){g.on(L,_,l)}))},a.prototype.once=function(t,r,l){var g=this;if(d(t)){l=r,p(t,function(L,c){g.once(c,L,l)});return}function _(){r.apply(l,arguments),g.off(t,_,l)}this.on(t,_,l)},a.prototype._spliceMatches=function(t,r){var l=0,g;if(o(t))for(g=t.length;l<g;l+=1)r(t[l])===!0&&(t.splice(l,1),g-=1,l-=1)},a.prototype._matchHandler=function(t){var r=this;return function(l){var g=t===l.handler;return g&&r._forgetContext(l.context),g}},a.prototype._matchContext=function(t){var r=this;return function(l){var g=t===l.context;return g&&r._forgetContext(l.context),g}},a.prototype._matchHandlerAndContext=function(t,r){var l=this;return function(g){var _=t===g.handler,L=r===g.context,c=_&&L;return c&&l._forgetContext(g.context),c}},a.prototype._offByEventName=function(t,r){var l=this,g=u(r),_=l._matchHandler(r);t=t.split(C),p(t,function(L){var c=l._safeEvent(L);g?l._spliceMatches(c,_):(p(c,function(m){l._forgetContext(m.context)}),l.events[L]=[])})},a.prototype._offByHandler=function(t){var r=this,l=this._matchHandler(t);p(this._safeEvent(),function(g){r._spliceMatches(g,l)})},a.prototype._offByObject=function(t,r){var l=this,g;this._indexOfContext(t)<0?p(t,function(_,L){l.off(L,_)}):f(r)?(g=this._matchContext(t),l._spliceMatches(this._safeEvent(r),g)):u(r)?(g=this._matchHandlerAndContext(r,t),p(this._safeEvent(),function(_){l._spliceMatches(_,g)})):(g=this._matchContext(t),p(this._safeEvent(),function(_){l._spliceMatches(_,g)}))},a.prototype.off=function(t,r){f(t)?this._offByEventName(t,r):arguments.length?u(t)?this._offByHandler(t):d(t)&&this._offByObject(t,r):(this.events={},this.contexts=[])},a.prototype.fire=function(t){this.invoke.apply(this,arguments)},a.prototype.invoke=function(t){var r,l,g,_;if(!this.hasListener(t))return!0;for(r=this._safeEvent(t),l=Array.prototype.slice.call(arguments,1),g=0;r[g];){if(_=r[g],_.handler.apply(_.context,l)===!1)return!1;g+=1}return!0},a.prototype.hasListener=function(t){return this.getListenerLength(t)>0},a.prototype.getListenerLength=function(t){var r=this._safeEvent(t);return r.length},s.exports=a},function(s,v,e){var i=e(1),n=e(15);function f(d){return!i(d)&&!n(d)}s.exports=f},function(s,v,e){function i(n){return n===null}s.exports=i},function(s,v,e){function i(n){return n===Object(n)}s.exports=i},function(s,v,e){function i(n,f,d){var o=0,u=n.length;for(d=d||null;o<u&&f.call(d,n[o],o,n)!==!1;o+=1);}s.exports=i},function(s,v,e){var i=e(19);function n(f,d){var o=i(d.prototype);o.constructor=f,f.prototype=o}s.exports=n},function(s,v,e){function i(n){function f(){}return f.prototype=n,new f}s.exports=i},function(s,v,e){var i=e(3),n=e(7),f=e(21),d=e(22),o=e(24),u=e(25),p=e(0),C=e(4),a=e(28),t=e(9),r={page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'},l=["first","prev","next","last"],g=["prev","next"],_="The container element is invalid.",L=n({init:function(c,m,S){this._containerElement=null,this._firstItemClassName=m.firstItemClassName,this._lastItemClassName=m.lastItemClassName,this._template=p({},r,m.template),this._buttons={},this._enabledPageElements=[],this._setRootElement(c),this._setMoveButtons(),this._setDisabledMoveButtons(),this._setMoreButtons(),this._attachClickEvent(S)},_setRootElement:function(c){if(C(c)?c=document.getElementById(c)||document.querySelector(c):c.jquery&&(c=c[0]),!a(c))throw new Error(_);this._containerElement=c},_setMoveButtons:function(){i(l,function(c){this._buttons[c]=t.createElementByTemplate(this._template.moveButton,{type:c})},this)},_setDisabledMoveButtons:function(){i(l,function(c){var m="disabled"+t.capitalizeFirstLetter(c);this._buttons[m]=t.createElementByTemplate(this._template.disabledMoveButton,{type:c})},this)},_setMoreButtons:function(){i(g,function(c){var m=c+"More";this._buttons[m]=t.createElementByTemplate(this._template.moreButton,{type:c})},this)},_getContainerElement:function(){return this._containerElement},_appendFirstButton:function(c){var m;c.page>1?m=this._buttons.first:m=this._buttons.disabledFirst,this._getContainerElement().appendChild(m)},_appendPrevButton:function(c){var m;c.currentPageIndex>1?m=this._buttons.prev:m=this._buttons.disabledPrev,this._getContainerElement().appendChild(m)},_appendNextButton:function(c){var m;c.currentPageIndex<c.lastPageListIndex?m=this._buttons.next:m=this._buttons.disabledNext,this._getContainerElement().appendChild(m)},_appendLastButton:function(c){var m;c.page<c.lastPage?m=this._buttons.last:m=this._buttons.disabledLast,this._getContainerElement().appendChild(m)},_appendPrevMoreButton:function(c){var m;c.prevMore&&(m=this._buttons.prevMore,u(m,this._firstItemClassName),this._getContainerElement().appendChild(m))},_appendNextMoreButton:function(c){var m;c.nextMore&&(m=this._buttons.nextMore,u(m,this._lastItemClassName),this._getContainerElement().appendChild(m))},_appendPages:function(c){var m=c.leftPageNumber,S=c.rightPageNumber,T,O;for(O=m;O<=S;O+=1)O===c.page?T=t.createElementByTemplate(this._template.currentPage,{page:O}):(T=t.createElementByTemplate(this._template.page,{page:O}),this._enabledPageElements.push(T)),O===m&&!c.prevMore&&u(T,this._firstItemClassName),O===S&&!c.nextMore&&u(T,this._lastItemClassName),this._getContainerElement().appendChild(T)},_attachClickEvent:function(c){var m=this._getContainerElement();d(m,"click",function(S){var T=f(S),O,H;o(S),H=this._getButtonType(T),H||(O=this._getPageNumber(T)),c(H,O)},this)},_getButtonType:function(c){var m,S=this._buttons;return i(S,function(T,O){return t.isContained(c,T)?(m=O,!1):!0},this),m},_getPageNumber:function(c){var m=this._findPageElement(c),S;return m&&(S=parseInt(m.innerText,10)),S},_findPageElement:function(c){for(var m=0,S=this._enabledPageElements.length,T;m<S;m+=1)if(T=this._enabledPageElements[m],t.isContained(c,T))return T;return null},_empty:function(){this._enabledPageElements=[],i(this._buttons,function(c,m){this._buttons[m]=c.cloneNode(!0)},this),this._getContainerElement().innerHTML=""},update:function(c){this._empty(),this._appendFirstButton(c),this._appendPrevButton(c),this._appendPrevMoreButton(c),this._appendPages(c),this._appendNextMoreButton(c),this._appendNextButton(c),this._appendLastButton(c)}});s.exports=L},function(s,v,e){function i(n){return n.target||n.srcElement}s.exports=i},function(s,v,e){var i=e(4),n=e(3),f=e(23);function d(p,C,a,t){if(i(C)){n(C.split(/\s+/g),function(r){o(p,r,a,t)});return}n(C,function(r,l){o(p,l,r,a)})}function o(p,C,a,t){function r(l){a.call(t||p,l||window.event)}"addEventListener"in p?p.addEventListener(C,r):"attachEvent"in p&&p.attachEvent("on"+C,r),u(p,C,a,r)}function u(p,C,a,t){var r=f(p,C),l=!1;n(r,function(g){return g.handler===a?(l=!0,!1):!0}),l||r.push({handler:a,wrappedHandler:t})}s.exports=d},function(s,v,e){var i="_feEventKey";function n(f,d){var o=f[i],u;return o||(o=f[i]={}),u=o[d],u||(u=o[d]=[]),u}s.exports=n},function(s,v,e){function i(n){if(n.preventDefault){n.preventDefault();return}n.returnValue=!1}s.exports=i},function(s,v,e){var i=e(3),n=e(8),f=e(26),d=e(27);function o(u){var p=Array.prototype.slice.call(arguments,1),C=u.classList,a=[],t;if(C){i(p,function(r){u.classList.add(r)});return}t=f(u),t&&(p=[].concat(t.split(/\s+/),p)),i(p,function(r){n(r,a)<0&&a.push(r)}),d(u,a)}s.exports=o},function(s,v,e){var i=e(1);function n(f){return!f||!f.className?"":i(f.className.baseVal)?f.className:f.className.baseVal}s.exports=n},function(s,v,e){var i=e(2),n=e(1);function f(d,o){if(o=i(o)?o.join(" "):o,o=o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),n(d.className.baseVal)){d.className=o;return}d.className.baseVal=o}s.exports=f},function(s,v,e){function i(n){return typeof HTMLElement=="object"?n&&(n instanceof HTMLElement||!!n.nodeType):!!(n&&n.nodeType)}s.exports=i},function(s,v,e){var i=e(8),n=e(3),f=e(2),d=e(4),o=e(0),u=/{{\s?|\s?}}/g,p=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,C=/\[\s?|\s?\]/,a=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,t=/\./,r=/^["']\w+["']$/,l=/"|'/g,g=/^-?\d+\.?\d*$/,_=2,L={if:O,each:H,with:st},c="a".split(/a/).length===3,m=function(){return c?function(y,x){return y.split(x)}:function(y,x){var E=[],b=0,M,I;for(x.global||(x=new RegExp(x,"g")),M=x.exec(y);M!==null;)I=M.index,E.push(y.slice(b,I)),b=I+M[0].length,M=x.exec(y);return E.push(y.slice(b)),E}}();function S(y,x){var E,b=x[y];return y==="true"?b=!0:y==="false"?b=!1:r.test(y)?b=y.replace(l,""):p.test(y)?(E=y.split(C),b=S(E[0],x)[S(E[1],x)]):a.test(y)?(E=y.split(t),b=S(E[0],x)[E[1]]):g.test(y)&&(b=parseFloat(y)),b}function T(y,x){var E=[y],b=[],M=0,I=0;return n(x,function(B,A){B.indexOf("if")===0?M+=1:B==="/if"?M-=1:!M&&(B.indexOf("elseif")===0||B==="else")&&(E.push(B==="else"?["true"]:B.split(" ").slice(1)),b.push(x.slice(I,A)),I=A+1)}),b.push(x.slice(I)),{exps:E,sourcesInsideIf:b}}function O(y,x,E){var b=T(y,x),M=!1,I="";return n(b.exps,function(B,A){return M=V(B,E),M&&(I=j(b.sourcesInsideIf[A],E)),!M}),I}function H(y,x,E){var b=V(y,E),M=f(b)?"@index":"@key",I={},B="";return n(b,function(A,R){I[M]=R,I["@this"]=A,o(E,I),B+=j(x.slice(),E)}),B}function st(y,x,E){var b=i("as",y),M=y[b+1],I=V(y.slice(0,b),E),B={};return B[M]=I,j(x,o(E,B))||""}function at(y,x,E){var b=y.splice(x+1,E-x);return b.pop(),b}function ot(y,x,E){for(var b=L[y],M=1,I=0,B,A=I+_,R=x[A];M&&d(R);)R.indexOf(y)===0?M+=1:R.indexOf("/"+y)===0&&(M-=1,B=A),A+=_,R=x[A];if(M)throw Error(y+" needs {{/"+y+"}} expression.");return x[I]=b(x[I].split(" ").slice(1),at(x,I,B),E),x}function V(y,x){var E=S(y[0],x);return E instanceof Function?lt(E,y.slice(1),x):E}function lt(y,x,E){var b=[];return n(x,function(M){b.push(S(M,E))}),y.apply(null,b)}function j(y,x){for(var E=1,b=y[E],M,I,B;d(b);)M=b.split(" "),I=M[0],L[I]?(B=ot(I,y.splice(E,y.length-E),x),y=y.concat(B)):y[E]=V(M,x),E+=_,b=y[E];return y.join("")}function ut(y,x){return j(m(y,u),x)}s.exports=ut},function(s,v,e){var i=e(1),n=e(31),f=7*24*60*60*1e3;function d(u){var p=new Date().getTime();return p-u>f}function o(u,p){var C="https://www.google-analytics.com/collect",a=location.hostname,t="event",r="use",l="TOAST UI "+u+" for "+a+": Statistics",g=window.localStorage.getItem(l);!i(window.tui)&&window.tui.usageStatistics===!1||g&&!d(g)||(window.localStorage.setItem(l,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&n(C,{v:1,t,tid:p,cid:a,dp:a,dh:u,el:u,ec:r})},1e3))}s.exports=o},function(s,v,e){var i=e(6);function n(f,d){var o=document.createElement("img"),u="";return i(d,function(p,C){u+="&"+C+"="+p}),u=u.substring(1),o.src=f+"?"+u,o.style.display="none",document.body.appendChild(o),document.body.removeChild(o),o}s.exports=n}])})})(W);var yt=W.exports;const xt=vt(yt);const Et=300,w=document.querySelector(".clear__icon"),Q=document.querySelector("#searchQuery"),G=document.querySelector(".pagination"),z=document.querySelector(".catalog__form"),D=document.querySelector(".gallery-movies"),U=document.querySelector(".no-results"),Pt=document.getElementById("tui-pagination-container");let $;q("weekly");Q.addEventListener("input",gt.debounce(bt,Et));w.addEventListener("click",_t);z.addEventListener("submit",Ct);function bt(h){h.target.value?(console.log(h.target.value),w.style.display="block"):w.style.display="none"}function _t(){w.style.display="none",Q.value=""}async function Ct(h){h.preventDefault(),D.innerHTML="";const{search:P}=h.currentTarget.elements;if($=P.value.trim(),w.style.display="none",$==""||!$){U.hidden=!1,G.style.display="none",z.reset();return}U.hidden=!0,q("query",$),z.reset()}async function Z(h){const P=h.map(async({poster_path:v,title:e,genre_ids:i,id:n,release_date:f,vote_average:d})=>{const o=f.substr(0,4),u=Mt(ct,i),p=ft(d);return mt(v,e,n,u,o,p)});return(await Promise.all(P)).join("")}function Mt(h,P){const s=[];return P.filter(v=>{h.map(({id:e,name:i})=>{e===v&&s.push(i)})}),s}async function q(h,P){let s,v;if(h=="weekly"?(s=await Y(),v=s.data.total_results):h=="query"&&(s=await K(P),v=s.data.total_results),h=="query"&&!v){G.style.display="none",U.hidden=!1,z.reset();return}else G.style.display="block";if(D.innerHTML=await Z(s.data.results),v>1e4)v=1e4;else if(v<=20){G.style.display="none";return}const e={totalItems:v,itemsPerPage:20,visiblePages:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}} custom-class"><svg class="tui-ico-{{type}}"><use href="sprite.svg#icon-{{type}}"></use></svg></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><svg class="tui-ico-ellip"><use href="sprite.svg#icon-ellip"></use></svg></a>'}};new xt(Pt,e).on("afterMove",async n=>{const{page:f}=n;if(h=="weekly"?s=await Y("week",f):h=="query"&&(s=await K(P,f)),s)D.innerHTML=await Z(s.data.results);else return!1})}const F="MY_LIBRARY";let X={},k=null;N.gallaryContainer.addEventListener("click",It);function tt(h){h.currentTarget===h.target&&(N.backdropMovieInfoContainer.classList.add("is-hidden"),N.movieInfoContainer.innerHTML="",N.backdropMovieInfoContainer.removeEventListener("click",tt))}function et(h){const P="Escape";h.code==P&&(N.backdropMovieInfoContainer.classList.add("is-hidden"),N.movieInfoContainer.innerHTML="",window.removeEventListener("keydown",et))}async function It(h){if(!h.target.classList.contains("js-modal-info"))return;N.backdropMovieInfoContainer.addEventListener("click",tt),window.addEventListener("keydown",et),N.closeModalBtn.addEventListener("click",rt),k=+h.target.dataset.id;const{data:s}=await Ot(k);X=s;const v=await dt(X);N.movieInfoContainer.insertAdjacentHTML("beforeend",v),N.modal.classList.toggle("is-hidden");const e={addBtn:document.querySelector(".add-btn"),removeBtm:document.querySelector(".remove-btn")},i=J(F);i&&i.map(n=>{if(n.id===k){e.addBtn.classList.add("hide"),e.removeBtm.classList.remove("hide");return}}),e.addBtn.addEventListener("click",St),e.removeBtm.addEventListener("click",Bt)}function St(){const h={addBtn:document.querySelector(".add-btn"),removeBtm:document.querySelector(".remove-btn")},P=J(F);let s="",v=[];if(P&&k){v=nt(P);const n=JSON.stringify(v);s=Lt(n)}const e=JSON.stringify(X),i=Tt(e,s);h.addBtn.classList.toggle("hide"),h.removeBtm.classList.toggle("hide"),it(F,i)}function Bt(){const h={addBtn:document.querySelector(".add-btn"),removeBtm:document.querySelector(".remove-btn")},P=J(F);h.addBtn.classList.toggle("hide"),h.removeBtm.classList.toggle("hide");const s=nt(P);it(F,s)}function nt(h){return h.map(P=>{if(P.id!==k)return P}).filter(P=>{if(P)return P})}function J(h){try{const P=localStorage.getItem(h);return P===null?void 0:JSON.parse(P)}catch(P){console.error("Get state error: ",P.message)}}function it(h,P){try{const s=JSON.stringify(P);localStorage.setItem(h,s)}catch(s){console.error("Set state error: ",s.message)}}function Lt(h){return h.slice(1,h.length-1)}function Tt(h,P){return JSON.parse(P?`[${P}, ${h}]`:`[${h}]`)}function rt(){N.modal.classList.toggle("is-hidden"),N.movieInfoContainer.innerHTML="",N.closeModalBtn.removeEventListener("click",rt)}async function Ot(h){return await pt(h)}
